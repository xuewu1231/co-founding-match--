# Mock模式使用说明

## 🎭 什么是Mock模式？

Mock模式是一个开发加速功能，让你无需真实数据库就能快速测试UI和功能。所有数据都是假的，但看起来像真的！

---

## ⚡ 为什么要用Mock模式？

### **优势**
1. **超快速开发** - 不需要等待注册登录
2. **预设场景** - 内置5个假用户数据，直接测试各种情况
3. **随时切换** - 一个开关就能切换真实/假数据
4. **保留代码** - Supabase代码都保留着，未来随时可用
5. **方便演示** - 给别人演示时不需要真的注册账号

### **使用场景**
- ✅ 快速开发UI和交互
- ✅ 测试各种用户场景
- ✅ 演示产品给别人看
- ✅ 不想每次都注册登录

---

## 🚀 如何使用？

### **开启Mock模式**

1. 打开 `.env.local` 文件
2. 设置 `NEXT_PUBLIC_MOCK_MODE=true`
3. 重启开发服务器

```bash
# .env.local
NEXT_PUBLIC_MOCK_MODE=true   # Mock模式开
```

### **关闭Mock模式（使用真实数据）**

```bash
# .env.local
NEXT_PUBLIC_MOCK_MODE=false  # Mock模式关
```

---

## 📋 Mock数据清单

### **当前用户（你自己）**
- 邮箱: test@example.com
- 姓名: 测试用户
- 职位: MVP开发者

### **其他用户（名片池里的）**

| 姓名 | 职位 | 标签 | 寻找方向 |
|------|------|------|----------|
| 张三 | AI技术负责人 | AI技术、产品0到1 | AIGC创业 |
| 李四 | 产品总监 | 产品0到1、增长营销 | 企业服务SaaS |
| 王五 | 连续创业者 | 融资、团队管理 | AI+教育 |
| 赵六 | 全栈工程师 | AI技术、数据分析 | 开发者工具 |
| 孙七 | 市场运营专家 | 增长营销、团队管理 | 消费级产品 |

### **标签数据**
- **能力标签** (10个): AI技术研发、产品从0到1、增长营销等
- **方向标签** (5个): AIGC、企业服务SaaS、教育等
- **角色标签** (5个): 技术合伙人、产品合伙人、商业合伙人等

---

## 🎬 Mock模式下的行为

### **登录注册**
- ✅ 输入任意邮箱密码都能"登录成功"
- ✅ 直接跳转到名片池
- ✅ 控制台会显示：`🎭 Mock Mode: 假装登录成功`

### **数据展示**
- ✅ 名片池显示5个假用户
- ✅ 标签筛选正常工作（前端筛选）
- ✅ 所有数据都有合理的假数据

### **交互功能**
- ✅ 点击"我想聊聊"会随机30%概率匹配成功
- ✅ 保存资料会假装成功
- ✅ 所有操作都有模拟延迟（看起来像真的）

---

## 🔧 技术实现

### **架构设计**

```
Mock模式架构：

┌─────────────────┐
│   页面组件       │
│  (Login/Pool)   │
└────────┬────────┘
         │
         ↓
┌─────────────────┐      是Mock?      ┌──────────────┐
│  统一服务层      │ ──────────────→  │  Mock数据     │
│ (auth-service)  │        是         │ (mock-data)  │
│ (data-service)  │                   └──────────────┘
└────────┬────────┘
         │ 否
         ↓
┌─────────────────┐
│  Supabase       │
│  (真实数据库)   │
└─────────────────┘
```

### **关键文件**

1. **`lib/mock-data.ts`** - 所有假数据定义
2. **`lib/auth-service.ts`** - 统一认证服务（自动切换）
3. **`lib/data-service.ts`** - 统一数据服务（自动切换）
4. **`lib/auth-helpers.ts`** - Supabase真实认证（保留）
5. **`.env.local`** - Mock模式开关

### **工作原理**

```typescript
// 自动检测Mock模式
if (MOCK_MODE) {
  // 返回假数据
  return MOCK_USER
} else {
  // 调用Supabase真实数据
  return await supabase.auth.getUser()
}
```

---

## 🎯 最佳实践

### **开发阶段（推荐Mock模式）**
```
NEXT_PUBLIC_MOCK_MODE=true

好处：
✅ 开发速度快
✅ 不需要网络
✅ 测试场景丰富
```

### **测试阶段（使用真实数据）**
```
NEXT_PUBLIC_MOCK_MODE=false

好处：
✅ 测试真实数据库
✅ 测试Supabase集成
✅ 发现真实环境问题
```

### **生产环境（必须真实数据）**
```
NEXT_PUBLIC_MOCK_MODE=false

原因：
⚠️ 生产环境不能用假数据！
```

---

## 🔍 如何识别Mock模式？

### **视觉提示**
- 🎭 导航栏有黄色"Mock模式"标签
- 🎭 登录页提示"输入任意邮箱密码即可登录"

### **控制台日志**
```javascript
// Mock模式下会输出：
🎭 Mock Mode: 返回假用户
🎭 Mock Mode: 假装登录成功
🎭 Mock Mode: 返回假名片数据
```

---

## 🚨 注意事项

### ⚠️ **不要**
- ❌ 生产环境开启Mock模式
- ❌ 依赖Mock数据做真实决策
- ❌ 在Mock模式下测试性能

### ✅ **应该**
- ✅ 开发UI时使用Mock模式
- ✅ 演示时使用Mock模式
- ✅ 最终部署前测试真实模式

---

## 📈 未来扩展

### **预留的SSO接口**

代码中已经预留了单点登录接口：

```typescript
// 支持企业微信、钉钉、飞书等
await ssoLogin('wechat', token)
await ssoLogin('dingtalk', token)
await ssoLogin('feishu', token)
```

未来可以快速集成企业SSO登录！

---

## 🆘 常见问题

### Q: Mock模式下能保存数据吗？
A: 不能，所有操作都是假的。刷新页面数据就没了。

### Q: 如何添加更多Mock数据？
A: 编辑 `lib/mock-data.ts` 文件，在数组里添加新的假用户即可。

### Q: Mock模式会影响生产环境吗？
A: 不会！只要 `.env.local` 设置为 `false`，就是真实数据。

### Q: 怎么知道现在是哪个模式？
A: 看导航栏有没有黄色"Mock模式"标签，或者看控制台日志。

---

## 🎉 总结

Mock模式 = **开发神器**！

- 开发阶段：开着Mock，快速迭代
- 测试阶段：关掉Mock，测真实流程
- 生产环境：必须关闭Mock

**记住：Mock模式让你开发快10倍！** 🚀
